language: python

python:
  - "3.4"

before_install:
  - sudo apt-get install liblua5.1-dev

install:
  - cp config.example.py config.py
  - "pip install --upgrade pip"
  - "pip install --trusted-host content.dev.faforever.com -r requirements.txt"

before_script:
  - "mysql -e 'create database faf_test;'"

script:
  - pip install -e .
  - py.test --slow --cov-report term-missing --cov=api
  - pyflakes . || true

after_success:
  - coveralls
